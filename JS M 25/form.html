<!DOCTYPE html>
<html lang="id">

<head>
  <meta charset="UTF-8">
  <title>Form Validation</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      padding: 20px;
    }

    h2 {
      text-align: center;
      color: #333;
    }

    form {
      width: 400px;
      margin: 0 auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
    }

    label {
      display: block;
      margin-top: 10px;
      font-weight: bold;
    }

    input {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    .error {
      color: red;
      font-size: 13px;
      margin-top: 3px;
    }

    button {
      margin-top: 15px;
      width: 100%;
      padding: 10px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    button:hover {
      background: #0056b3;
    }

    .success {
      color: green;
      text-align: center;
      margin-top: 10px;
      font-weight: bold;
    }

    input.error-input {
      background-color: #ffe6e6;
      border-color: red;
      animation: shake 0.2s ease-in-out 2;
    }

    @keyframes shake {
      0% {
        transform: translateX(0);
      }

      25% {
        transform: translateX(-3px);
      }

      50% {
        transform: translateX(3px);
      }

      75% {
        transform: translateX(-3px);
      }

      100% {
        transform: translateX(0);
      }
    }
  </style>
</head>

<body>

  <h2>üìù Form Registrasi</h2>

  <form id="registerForm">
    <label>Nama Lengkap</label>
    <input type="text" id="nama" placeholder="Masukkan nama">
    <div class="error" id="errorNama"></div>

    <label>Email</label>
    <input type="email" id="email" placeholder="Masukkan email">
    <div class="error" id="errorEmail"></div>

    <label>Password</label>
    <input type="password" id="password" placeholder="Minimal 8 karakter">
    <div class="error" id="errorPassword"></div>

    <label>Konfirmasi Password</label>
    <input type="password" id="confirmPassword" placeholder="Ulangi password">
    <div class="error" id="errorConfirm"></div>

    <label>Nomor HP</label>
    <input type="text" id="telepon" placeholder="Contoh: 08123456789">
    <div class="error" id="errorTelepon"></div>

    <label>Alamat</label>
    <input type="text" id="alamat" placeholder="Masukkan alamat">
    <div class="error" id="errorAlamat"></div>

    <button type="submit">Daftar</button>
  </form>

  <div class="success" id="successMsg"></div>

<script>
  const form = document.getElementById("registerForm");

  const nama = document.getElementById("nama");
  const alamat = document.getElementById("alamat");
  const email = document.getElementById("email");
  const password = document.getElementById("password");
  const confirmPassword = document.getElementById("confirmPassword");
  const telepon = document.getElementById("telepon");

  const errorNama = document.getElementById("errorNama");
  const errorAlamat = document.getElementById("errorAlamat");
  const errorEmail = document.getElementById("errorEmail");
  const errorPassword = document.getElementById("errorPassword");
  const errorConfirm = document.getElementById("errorConfirm");
  const errorTelepon = document.getElementById("errorTelepon");
  const successMsg = document.getElementById("successMsg");

  function setError(input, errorEl, message) {
    errorEl.textContent = message;
    input.classList.add("error-input");
  }

  function clearError(input, errorEl) {
    errorEl.textContent = "";
    input.classList.remove("error-input");
  }

  form.addEventListener("submit", function(e) {
    e.preventDefault();
    let isValid = true;
    successMsg.textContent = "";

    // Nama (min 3 karakter)
    if (nama.value.trim().length < 3) {
      setError(nama, errorNama, "Nama minimal 3 karakter");
      isValid = false;
    } else {
      clearError(nama, errorNama);
    }

    // Alamat (wajib)
    if (alamat.value.trim() === "") {
      setError(alamat, errorAlamat, "Alamat wajib diisi");
      isValid = false;
    } else {
      clearError(alamat, errorAlamat);
    }

    // Email (hanya gmail)
    const emailPattern = /^[a-zA-Z0-9._%+-]+@gmail\.com$/;
    if (!email.value.match(emailPattern)) {
      setError(email, errorEmail, "Email harus menggunakan @gmail.com");
      isValid = false;
    } else {
      clearError(email, errorEmail);
    }

    // Password
    if (password.value.length < 8) {
      setError(password, errorPassword, "Password minimal 8 karakter");
      isValid = false;
    } else {
      clearError(password, errorPassword);
    }

    // Konfirmasi Password
    if (password.value !== confirmPassword.value) {
      setError(confirmPassword, errorConfirm, "Password tidak sama");
      isValid = false;
    } else {
      clearError(confirmPassword, errorConfirm);
    }

    // Telepon
    const phonePattern = /^[0-9]{10,13}$/;
    if (!telepon.value.match(phonePattern)) {
      setError(telepon, errorTelepon, "Nomor HP 10‚Äì13 digit");
      isValid = false;
    } else {
      clearError(telepon, errorTelepon);
    }

    // Jika valid ‚Üí simpan ke localStorage
    if (isValid) {
      const userData = {
        nama: nama.value,
        alamat: alamat.value,
        email: email.value,
        telepon: telepon.value
      };

      localStorage.setItem("userData", JSON.stringify(userData));
      successMsg.textContent = "‚úÖ Registrasi berhasil!";
      form.reset();
    }
  });
</script>


</body>

</html>